# Execute VPR for architecture exploration
 
    
#vpr /home/arslan/Downloads/OpenFPGA/power_tests/power/run004/k6_N10_tileable_dpram8K_dsp36_40nm/adder_6/MIN_ROUTE_CHAN_WIDTH/arch/k6_N10_tileable_dpram8K_dsp36_40nm.xml adder_6.blif --route_chan_width ${VPR_ROUTE_CHAN_WIDTH}  --clock_modeling route

vpr /home/arslan/Downloads/OpenFPGA/power_tests/power/run004/k6_N10_tileable_dpram8K_dsp36_40nm/adder_6/MIN_ROUTE_CHAN_WIDTH/arch/k6_N10_tileable_dpram8K_dsp36_40nm.xml adder_6.blif  --clock_modeling route


# Read OpenFPGA architecture definition
read_openfpga_arch -f /home/arslan/Downloads/OpenFPGA/power_tests/power/run004/k6_N10_tileable_dpram8K_dsp36_40nm/adder_6/MIN_ROUTE_CHAN_WIDTH/arch/k6_frac_N10_adder_chain_dpram8K_dsp36_40nm_openfpga.xml

# Read OpenFPGA simulation settings
read_openfpga_simulation_setting -f /home/arslan/Downloads/OpenFPGA/openfpga_flow/openfpga_simulation_settings/fixed_sim_openfpga.xml

# Annotate the OpenFPGA architecture to VPR data base
# to debug use --verbose options
link_openfpga_arch --sort_gsb_chan_node_in_edges

# Check and correct any naming conflicts in the BLIF netlist
check_netlist_naming_conflict --fix --report ./netlist_renaming.xml

# Build the module graph
#  - Enabled compression on routing architecture modules
#  - Enable pin duplication on grid modules
build_fabric --compress_routing --write_fabric_key ./fabric_key.xml #--verbose

# Write the fabric hierarchy of module graph to a file
# This is used by hierarchical PnR flows
write_fabric_hierarchy --file ./fabric_hierarchy.txt

# Write the Verilog netlist for FPGA fabric
#  - Enable the use of explicit port mapping in Verilog netlist
write_fabric_verilog --file ./SRC --explicit_port_mapping --include_timing --print_user_defined_template --verbose

# Write the SDC files for PnR backend
#  - Turn on every options here
write_pnr_sdc --file ./SDC

# Write SDC to disable timing for configure ports
write_sdc_disable_timing_configure_ports --file ./SDC/disable_configure_ports.sdc

# Finish and exit OpenFPGA
  

exit
